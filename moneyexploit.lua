--[[
    â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
    â•‘                    ADMIN LIBRARY v1.0                     â•‘
    â•‘          BibliothÃ¨que de gestion Ã©conomie Roblox          â•‘
    â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    
    ğŸ“¦ INSTALLATION:
    Placer ce script dans ReplicatedStorage en tant que ModuleScript
    nommÃ© "AdminLib"
    
    ğŸ“ UTILISATION:
    local AdminLib = require(game.ReplicatedStorage.AdminLib)
    AdminLib:GiveMoney(player, 1000)
    
    âš ï¸ NOTE: Ce systÃ¨me fonctionne en client-side uniquement.
    Pour une vraie sÃ©curitÃ©, utilisez RemoteEvents cÃ´tÃ© serveur.
]]

local Players = game:GetService("Players")

local AdminLib = {}
AdminLib.__index = AdminLib

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- CONFIGURATION
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

AdminLib.Config = {
    -- Noms possibles pour la valeur d'argent dans leaderstats
    MoneyNames = {"Cash", "Money", "Coins", "Credits", "Currency"},
    
    -- Logs d'actions
    EnableLogs = true,
    
    -- Limite maximale d'argent
    MaxMoney = 999999999,
}

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- FONCTIONS UTILITAIRES PRIVÃ‰ES
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

local function Log(message)
    if AdminLib.Config.EnableLogs then
        print("[AdminLib]", message)
    end
end

local function GetMoneyValue(player)
    if not player or not player:FindFirstChild("leaderstats") then
        return nil
    end
    
    for _, name in ipairs(AdminLib.Config.MoneyNames) do
        local moneyValue = player.leaderstats:FindFirstChild(name)
        if moneyValue then
            return moneyValue
        end
    end
    
    return nil
end

local function ClampMoney(amount)
    return math.clamp(amount, 0, AdminLib.Config.MaxMoney)
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- GESTION DE L'ARGENT
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

--[[
    Donne de l'argent Ã  un joueur
    @param player: Player - Le joueur cible
    @param amount: number - Le montant Ã  ajouter
    @return boolean - SuccÃ¨s de l'opÃ©ration
]]
function AdminLib:GiveMoney(player, amount)
    local moneyValue = GetMoneyValue(player)
    if not moneyValue then
        Log("âŒ Impossible de trouver la valeur d'argent pour " .. player.Name)
        return false
    end
    
    local newAmount = ClampMoney(moneyValue.Value + amount)
    moneyValue.Value = newAmount
    Log("âœ… " .. amount .. "$ donnÃ© Ã  " .. player.Name .. " (Total: " .. newAmount .. "$)")
    return true
end

--[[
    DÃ©finit l'argent d'un joueur
    @param player: Player - Le joueur cible
    @param amount: number - Le nouveau montant
    @return boolean - SuccÃ¨s de l'opÃ©ration
]]
function AdminLib:SetMoney(player, amount)
    local moneyValue = GetMoneyValue(player)
    if not moneyValue then
        Log("âŒ Impossible de trouver la valeur d'argent pour " .. player.Name)
        return false
    end
    
    local newAmount = ClampMoney(amount)
    moneyValue.Value = newAmount
    Log("âœ… Argent de " .. player.Name .. " dÃ©fini Ã  " .. newAmount .. "$")
    return true
end

--[[
    Retire de l'argent Ã  un joueur
    @param player: Player - Le joueur cible
    @param amount: number - Le montant Ã  retirer
    @return boolean - SuccÃ¨s de l'opÃ©ration
]]
function AdminLib:RemoveMoney(player, amount)
    local moneyValue = GetMoneyValue(player)
    if not moneyValue then
        Log("âŒ Impossible de trouver la valeur d'argent pour " .. player.Name)
        return false
    end
    
    local newAmount = ClampMoney(moneyValue.Value - amount)
    moneyValue.Value = newAmount
    Log("âœ… " .. amount .. "$ retirÃ© Ã  " .. player.Name .. " (Total: " .. newAmount .. "$)")
    return true
end

--[[
    Obtient l'argent actuel d'un joueur
    @param player: Player - Le joueur cible
    @return number - Le montant actuel (0 si erreur)
]]
function AdminLib:GetMoney(player)
    local moneyValue = GetMoneyValue(player)
    if not moneyValue then
        return 0
    end
    return moneyValue.Value
end

--[[
    Multiplie l'argent d'un joueur
    @param player: Player - Le joueur cible
    @param multiplier: number - Le multiplicateur
    @return boolean - SuccÃ¨s de l'opÃ©ration
]]
function AdminLib:MultiplyMoney(player, multiplier)
    local currentMoney = self:GetMoney(player)
    local newAmount = currentMoney * multiplier
    return self:SetMoney(player, newAmount)
end

--[[
    RÃ©initialise l'argent d'un joueur Ã  0
    @param player: Player - Le joueur cible
    @return boolean - SuccÃ¨s de l'opÃ©ration
]]
function AdminLib:ResetMoney(player)
    return self:SetMoney(player, 0)
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- GESTION DES JOUEURS
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

--[[
    Obtient tous les joueurs actuels
    @return table - Liste des joueurs
]]
function AdminLib:GetAllPlayers()
    return Players:GetPlayers()
end

--[[
    Obtient les noms de tous les joueurs
    @return table - Liste des noms de joueurs
]]
function AdminLib:GetPlayerNames()
    local names = {}
    for _, player in ipairs(Players:GetPlayers()) do
        table.insert(names, player.Name)
    end
    return names
end

--[[
    Trouve un joueur par son nom (partiel)
    @param name: string - Nom ou partie du nom
    @return Player|nil - Le joueur trouvÃ© ou nil
]]
function AdminLib:FindPlayer(name)
    name = string.lower(name)
    for _, player in ipairs(Players:GetPlayers()) do
        if string.lower(player.Name):find(name) then
            return player
        end
    end
    return nil
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- OPÃ‰RATIONS EN MASSE
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

--[[
    Donne de l'argent Ã  tous les joueurs
    @param amount: number - Le montant Ã  donner Ã  chacun
    @return number - Nombre de joueurs affectÃ©s
]]
function AdminLib:GiveMoneyToAll(amount)
    local count = 0
    for _, player in ipairs(self:GetAllPlayers()) do
        if self:GiveMoney(player, amount) then
            count = count + 1
        end
    end
    Log("âœ… " .. amount .. "$ donnÃ© Ã  " .. count .. " joueur(s)")
    return count
end

--[[
    RÃ©initialise l'argent de tous les joueurs
    @return number - Nombre de joueurs affectÃ©s
]]
function AdminLib:ResetAllMoney()
    local count = 0
    for _, player in ipairs(self:GetAllPlayers()) do
        if self:ResetMoney(player) then
            count = count + 1
        end
    end
    Log("âœ… Argent rÃ©initialisÃ© pour " .. count .. " joueur(s)")
    return count
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- STATISTIQUES
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

--[[
    Obtient le joueur le plus riche
    @return Player|nil, number - Le joueur et son argent
]]
function AdminLib:GetRichestPlayer()
    local richest = nil
    local maxMoney = 0
    
    for _, player in ipairs(self:GetAllPlayers()) do
        local money = self:GetMoney(player)
        if money > maxMoney then
            maxMoney = money
            richest = player
        end
    end
    
    return richest, maxMoney
end

--[[
    Obtient l'argent total dans l'Ã©conomie
    @return number - Somme totale de l'argent
]]
function AdminLib:GetTotalMoney()
    local total = 0
    for _, player in ipairs(self:GetAllPlayers()) do
        total = total + self:GetMoney(player)
    end
    return total
end

--[[
    Obtient la moyenne d'argent par joueur
    @return number - Moyenne d'argent
]]
function AdminLib:GetAverageMoney()
    local players = self:GetAllPlayers()
    if #players == 0 then return 0 end
    return self:GetTotalMoney() / #players
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-- UTILITAIRES
-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

--[[
    Formate un nombre avec des sÃ©parateurs
    @param number: number - Le nombre Ã  formater
    @return string - Nombre formatÃ© (ex: 1,000,000)
]]
function AdminLib:FormatMoney(number)
    local formatted = tostring(math.floor(number))
    local k
    while true do
        formatted, k = string.gsub(formatted, "^(-?%d+)(%d%d%d)", '%1,%2')
        if k == 0 then break end
    end
    return formatted .. "$"
end

--[[
    VÃ©rifie si un joueur peut se permettre un montant
    @param player: Player - Le joueur Ã  vÃ©rifier
    @param amount: number - Le montant requis
    @return boolean - true si le joueur a assez d'argent
]]
function AdminLib:CanAfford(player, amount)
    return self:GetMoney(player) >= amount
end

-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Log("ğŸ“¦ AdminLib chargÃ© avec succÃ¨s!")

return AdminLib